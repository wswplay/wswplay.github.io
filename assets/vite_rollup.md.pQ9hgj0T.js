import{_ as n,c as a,o as l,b as e}from"./chunks/framework._eNwL97Z.js";const b=JSON.parse('{"title":"Rollup.js介绍使用方法教程","description":"","frontmatter":{"title":"Rollup.js介绍使用方法教程"},"headers":[{"level":2,"title":"命令安装及使用","slug":"命令安装及使用","link":"#命令安装及使用","children":[]},{"level":2,"title":"配置文件","slug":"配置文件","link":"#配置文件","children":[{"level":3,"title":"1、默认类型","slug":"_1、默认类型","link":"#_1、默认类型","children":[]},{"level":3,"title":"2、CommonJS","slug":"_2、commonjs","link":"#_2、commonjs","children":[]},{"level":3,"title":"3、Typescript","slug":"_3、typescript","link":"#_3、typescript","children":[]}]}],"relativePath":"vite/rollup.md","filePath":"vite/rollup.md"}'),p={name:"vite/rollup.md"};function o(r,s,c,t,i,u){return l(),a("div",null,s[0]||(s[0]=[e(`<h1 id="rollup-give-u-more-free-feel" tabindex="-1">Rollup Give U More Free &amp; Feel！ <a class="header-anchor" href="#rollup-give-u-more-free-feel" aria-label="Permalink to &quot;Rollup Give U More Free &amp; Feel！&quot;">​</a></h1><ul><li><a href="https://github.com/rollup/rollup" target="_blank" rel="noreferrer">Rollup</a> 是一个 <code>JavaScript</code> 模块打包工具，使用 <code>ES6模块标准</code>。让你更自由，想用就用。</li><li><code>Rollup</code> 还可以对代码进行<code>静态分析</code>，使你最终的代码没有冗余。</li></ul><h2 id="命令安装及使用" tabindex="-1">命令安装及使用 <a class="header-anchor" href="#命令安装及使用" aria-label="Permalink to &quot;命令安装及使用&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#9ECBFF;"> install</span><span style="color:#79B8FF;"> -g</span><span style="color:#9ECBFF;"> rollup</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>命令行打包示例：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 用于浏览器</span></span>
<span class="line"><span style="color:#B392F0;">rollup</span><span style="color:#9ECBFF;"> main.js</span><span style="color:#79B8FF;"> --file</span><span style="color:#9ECBFF;"> bundle.js</span><span style="color:#79B8FF;"> --format</span><span style="color:#9ECBFF;"> iife</span></span>
<span class="line"><span style="color:#6A737D;"># 用于Node.js compile to a CommonJS module (&#39;cjs&#39;)</span></span>
<span class="line"><span style="color:#B392F0;">rollup</span><span style="color:#9ECBFF;"> main.js</span><span style="color:#79B8FF;"> --file</span><span style="color:#9ECBFF;"> bundle.js</span><span style="color:#79B8FF;"> --format</span><span style="color:#9ECBFF;"> cjs</span></span>
<span class="line"><span style="color:#6A737D;"># 同时用于浏览器和Node.js UMD format requires a bundle name</span></span>
<span class="line"><span style="color:#B392F0;">rollup</span><span style="color:#9ECBFF;"> main.js</span><span style="color:#79B8FF;"> --file</span><span style="color:#9ECBFF;"> bundle.js</span><span style="color:#79B8FF;"> --format</span><span style="color:#9ECBFF;"> umd</span><span style="color:#79B8FF;"> --name</span><span style="color:#9ECBFF;"> &quot;myBundle&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>--config 或 -c 指向使用配置文件：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">rollup</span><span style="color:#79B8FF;"> --config</span><span style="color:#9ECBFF;"> xxx.config.js</span></span>
<span class="line"><span style="color:#6A737D;"># Debug模式</span></span>
<span class="line"><span style="color:#B392F0;">rollup</span><span style="color:#79B8FF;"> --config</span><span style="color:#79B8FF;"> --configDebug</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为了实现互通性，Rollup 也支持从安装在 node_modules 目录下的包中加载配置文件。从 Node 包中加载配置：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># Rollup 首先会尝试加载 &quot;rollup-config-my-special-config&quot;;</span></span>
<span class="line"><span style="color:#6A737D;"># 如果失败，Rollup 则会尝试加载 &quot;my-special-config&quot;</span></span>
<span class="line"><span style="color:#B392F0;">rollup</span><span style="color:#79B8FF;"> --config</span><span style="color:#9ECBFF;"> node:my-special-config</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-label="Permalink to &quot;配置文件&quot;">​</a></h2><h3 id="_1、默认类型" tabindex="-1">1、默认类型 <a class="header-anchor" href="#_1、默认类型" aria-label="Permalink to &quot;1、默认类型&quot;">​</a></h3><p>配置文件是一个 ES 模块，对外导出一个对象。位于项目根目录，命名为 <code>rollup.config.js</code> 或 <code>rollup.config.mjs</code>。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// rollup.config.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  input: </span><span style="color:#9ECBFF;">&quot;src/main.js&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  output: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    file: </span><span style="color:#9ECBFF;">&quot;bundle.js&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    format: </span><span style="color:#9ECBFF;">&quot;cjs&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2、commonjs" tabindex="-1">2、CommonJS <a class="header-anchor" href="#_2、commonjs" aria-label="Permalink to &quot;2、CommonJS&quot;">​</a></h3><p>如果想用 <code>CommonJS</code> 的 <code>require</code> 和 <code>module.exports</code>，配置文件后缀应为 <code>.cjs</code>。</p><h3 id="_3、typescript" tabindex="-1">3、Typescript <a class="header-anchor" href="#_3、typescript" aria-label="Permalink to &quot;3、Typescript&quot;">​</a></h3><p>如果配置文件后缀为 <code>.ts</code>，则应安装 <code>@rollup/plugin-typescript</code> 插件，并传入 <code>--configPlugin</code> 配置项。还需单独安装它的<a href="https://github.com/rollup/plugins/tree/master/packages/typescript#install" target="_blank" rel="noreferrer">依赖包</a>：<code>typescript</code> 和 <code>tslib</code>。<br><a href="https://rollupjs.org/command-line-interface/#configplugin-plugin" target="_blank" rel="noreferrer">官网文档</a></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// package.json</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;scripts&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;build&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;rollup -c rollup.config.ts --configPlugin typescript&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#79B8FF;">  &quot;devDependencies&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;@rollup/plugin-typescript&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;^11.0.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;tslib&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;^2.5.0&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#79B8FF;">    &quot;typescript&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;^4.9.5&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>然后，配置文件中 <code>plugins</code> 字段需加入这个插件：</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// my.config.ts</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> typescript </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &quot;@rollup/plugin-typescript&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { defineConfig } </span><span style="color:#F97583;">from</span><span style="color:#9ECBFF;"> &quot;rollup&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#F97583;"> default</span><span style="color:#B392F0;"> defineConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  input: </span><span style="color:#9ECBFF;">&quot;src/xiao.ts&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  output: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    dir: </span><span style="color:#9ECBFF;">&quot;nanzhi&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  plugins: [</span><span style="color:#B392F0;">typescript</span><span style="color:#E1E4E8;">()],</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div>`,21)]))}const y=n(p,[["render",o]]);export{b as __pageData,y as default};
