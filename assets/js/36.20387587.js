(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{393:function(s,t,a){"use strict";a.r(t);var n=a(45),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"一个组件就是一个函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一个组件就是一个函数"}},[s._v("#")]),s._v(" 一个组件就是一个函数")]),s._v(" "),a("p",[s._v("Vue 来说，一个组件最核心的东西是 render 函数，剩余的其他内容，如 data、compouted、props 等都是为 render 函数提供数据来源服务的。")]),s._v(" "),a("h2",{attrs:{id:"组件的输出就是-virtual-dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件的输出就是-virtual-dom"}},[s._v("#")]),s._v(" 组件的输出就是："),a("code",[s._v("Virtual DOM")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("在后续行文时，将统一使用 VNode 来简称 Virtual DOM 。"),a("br"),s._v("\n在Vue.js 中虚拟 DOM 的 JavaScript 对象就是 VNode。")])]),s._v(" "),a("p",[a("strong",[s._v("为什么不直接输出"),a("code",[s._v("html")]),s._v("，而是"),a("code",[s._v("Virtual DOM")]),s._v("呢？")]),a("br"),s._v("\n其原因是 Virtual DOM 带来了 分层设计，它对渲染过程的抽象，使得框架可以渲染到 "),a("strong",[s._v("web(浏览器) 以外的平台，以及能够实现 SSR 等")]),s._v("。")]),s._v(" "),a("blockquote",[a("p",[s._v("至于 Virtual DOM 相比原生 DOM 操作的性能，这并非 Virtual DOM 的目标，确切地说，如果要比较二者的性能是要“控制变量”的，例如：页面的大小、数据变化量等。")])]),s._v(" "),a("h2",{attrs:{id:"组件的-vnode-如何表示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件的-vnode-如何表示"}},[s._v("#")]),s._v(" 组件的 "),a("code",[s._v("VNode")]),s._v(" 如何表示")]),s._v(" "),a("p",[s._v("可以让 VNode 的 tag 属性指向组件本身，从而使用 VNode 来描述组件。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VNode")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// _isVNode 属性在上文中没有提到，它是一个始终为 true 的值")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 有了它，我们就可以判断一个对象是否是 VNode 对象")]),s._v("\n  _isVNode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// el：当一个 VNode 被渲染为真实 DOM 后，el 属性的值会引用该真实DOM")]),s._v("\n  el"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Element "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" VNodeFlags\n  tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" FunctionalComponent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ComponentClass "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" VNodeData "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  children"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" VNodeChildren\n  childFlags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ChildrenFlags\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"vnode的属性称为vnodedata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vnode的属性称为vnodedata"}},[s._v("#")]),s._v(" VNode的属性称为VNodeData")]),s._v(" "),a("ol",[a("li",[s._v("假如一个 VNode 的类型是 html 标签，则 VNodeData 中可以包含 class、style 以及一些事件。")]),s._v(" "),a("li",[s._v("如果 VNode 的类型是组件，那么我们同样可以用 VNodeData 来描述组件，比如组件的事件、组件的 props 等等。例如：")])]),s._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("MyComponent")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("@some-event")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("prop-a")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("则其对应的 VNodeData 应为：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  flags"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" VNodeFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COMPONENT_STATEFUL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'some-event'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" handler\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    propA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 其他数据...")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"组件的种类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件的种类"}},[s._v("#")]),s._v(" 组件的种类")]),s._v(" "),a("p",[s._v("第一种方式是使用一个普通的函数：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MyComponent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("第二种方式是使用一个类：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyComponent")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("实际上它们分别代表两类组件："),a("br"),s._v("\n函数式组件("),a("code",[s._v("Functional component")]),s._v(") 和 有状态组件("),a("code",[s._v("Stateful component")]),s._v(")。")]),s._v(" "),a("p",[s._v("它们的区别如下：")]),s._v(" "),a("h4",{attrs:{id:"函数式组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数式组件"}},[s._v("#")]),s._v(" 函数式组件：")]),s._v(" "),a("ol",[a("li",[s._v("是一个纯函数")]),s._v(" "),a("li",[s._v("没有自身状态，只接收外部数据")]),s._v(" "),a("li",[s._v("产出 VNode 的方式：单纯的函数调用")])]),s._v(" "),a("h4",{attrs:{id:"有状态组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有状态组件"}},[s._v("#")]),s._v(" 有状态组件：")]),s._v(" "),a("ol",[a("li",[s._v("是一个类，可实例化")]),s._v(" "),a("li",[s._v("可以有自身状态")]),s._v(" "),a("li",[s._v("产出 VNode 的方式：需要实例化，然后调用其 render 函数")])]),s._v(" "),a("h2",{attrs:{id:"vnode-的种类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vnode-的种类"}},[s._v("#")]),s._v(" VNode 的种类")]),s._v(" "),a("ol",[a("li",[s._v("比如一个 VNode 对象是 html 标签的描述，那么其 tag 属性值就是一个字符串，即标签的名字；")]),s._v(" "),a("li",[s._v("如果是组件的描述，那么其 tag 属性值则引用组件类(或函数)本身；")]),s._v(" "),a("li",[s._v("如果是文本节点的描述，那么其 tag 属性值为 null。")])]),s._v(" "),a("p",[s._v("总的来说，我们可以把 VNode 分成五类，分别是："),a("br"),s._v(" "),a("strong",[s._v("html/svg 元素")]),s._v("、"),a("strong",[s._v("组件")]),s._v("、"),a("strong",[s._v("纯文本")]),s._v("、"),a("strong",[s._v("Fragment")]),s._v(" 以及 "),a("strong",[s._v("Portal")]),s._v("：\n"),a("img",{attrs:{src:"http://hcysun.me/vue-design/assets/img/vnode-types.7d99313d.png",alt:""}})])])}),[],!1,null,null,null);t.default=e.exports}}]);