import{_ as s,c as n,o as a,a as e}from"./app.7a9633d7.js";const y=JSON.parse('{"title":"怎么写一个node命令行工具","description":"","frontmatter":{"title":"怎么写一个node命令行工具","outline":"deep"},"headers":[{"level":2,"title":"创建一个项目及文件","slug":"创建一个项目及文件","link":"#创建一个项目及文件","children":[]},{"level":2,"title":"在文件中写入代码","slug":"在文件中写入代码","link":"#在文件中写入代码","children":[{"level":3,"title":"index.js","slug":"index-js","link":"#index-js","children":[]},{"level":3,"title":"package.json","slug":"package-json","link":"#package-json","children":[]},{"level":3,"title":"where xiao-cli","slug":"where-xiao-cli","link":"#where-xiao-cli","children":[]}]}],"relativePath":"node/cli.md"}'),l={name:"node/cli.md"},p=e(`<h1 id="cli-从-0-写一个-node-命令行工具" tabindex="-1">CLI：从 0 写一个 node 命令行工具 <a class="header-anchor" href="#cli-从-0-写一个-node-命令行工具" aria-hidden="true">#</a></h1><p>CLI：Command Line Interface。</p><h2 id="创建一个项目及文件" tabindex="-1">创建一个项目及文件 <a class="header-anchor" href="#创建一个项目及文件" aria-hidden="true">#</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 创建一个文件夹</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">first-node-cli</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 进入文件夹</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">first-node-cli</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 快速创建package.json文件</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 创建index.js文件</span></span>
<span class="line"><span style="color:#FFCB6B;">touch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 编辑器打开项目</span></span>
<span class="line"><span style="color:#FFCB6B;">code</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="在文件中写入代码" tabindex="-1">在文件中写入代码 <a class="header-anchor" href="#在文件中写入代码" aria-hidden="true">#</a></h2><h3 id="index-js" tabindex="-1">index.js <a class="header-anchor" href="#index-js" aria-hidden="true">#</a></h3><p>在 index.js 文件中，写入以下代码：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// index.js</span></span>
<span class="line"><span style="color:#A6ACCD;">#</span><span style="color:#89DDFF;">!/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">env node</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello, Cli</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>#!/usr/bin/env node</code>：<strong>该行必不可少</strong>。意思是，让系统自动去环境设置寻找 node 目录，再调用对应路径下的解释器程序。实际上，就是告诉这是一个可以用 node <strong>直接执行</strong>的文件。</p><p>所以你可以直接这样运行 index.js</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># zsh: permission denied: ./index.js</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>于是你会得到<code> zsh: permission denied: ./index.js</code>，没有权限。那就添加权限</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">chmod</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">744</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.js</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>再次运行，你可以看到<code>Hello, Cli</code>了。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">.</span><span style="color:#FFCB6B;">/index.js</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Hello, Cli</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="package-json" tabindex="-1">package.json <a class="header-anchor" href="#package-json" aria-hidden="true">#</a></h3><p>在 bin 字段声明一个命令。想多个，就声明多个。</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">bin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">xiao-cli</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.js</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>运行 <code>xiao-cli</code> 命令</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">xiao-cli</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># zsh: command not found: xiao-cli</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>命令不存在？因为，我们还没有安装嘛，所以终端不认识这个。那就安起</p><blockquote><p>本地测试一个 npm 包，可使用：npm link 本地安装这个包就行。一般是安装到全局。</p></blockquote><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">link</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>再次运行命令 <code>xiao-cli</code> 命令，就成功了。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">xiao-cli</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Hello, Cli</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="where-xiao-cli" tabindex="-1">where xiao-cli <a class="header-anchor" href="#where-xiao-cli" aria-hidden="true">#</a></h3><p><strong>看看命令到底是安装在什么地方呢？</strong></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xiao-cli</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># /Users/youraccount/.nvm/versions/node/v18.14.0/bin/xiao-cli</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,28),o=[p];function i(c,r,t,d,b,u){return a(),n("div",null,o)}const m=s(l,[["render",i]]);export{y as __pageData,m as default};
